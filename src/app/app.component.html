<div class="min-app">
  <img src="assets/img/svg/small_screen.svg" /><br />
  Please use a tablet or desktop for the best connected worker experience
</div>

<mat-sidenav-container class="main-app">
  <mat-sidenav
    #sidenav
    [(opened)]="this.opened"
    (opened)="this.opened = true"
    (closed)="this.opened = false"
    [ngClass]="{
      'hide-content': isUserAuthenticated === false
    }"
  >
    <mat-nav-list
      class="menu-item"
      *ngFor="let menuitem of menus; let i = index"
    >
      <li
        routerLinkActive="selected"
        routerDirection="root"
        title="{{ menuitem.title }}"
        *appCheckUserHasPermission="[menuitem.permission]"
        style="display: flex"
      >
        <a
          mat-list-item
          class="menu-name"
          [routerLink]="menuitem.url"
          routerLinkActive="active"
          (click)="selectedListElement(menuitem.title); sidenav.close()"
        >
          <img src="{{ menuitem.image }}" class="sidebar-icons" />
          <span class="menu-title">
            {{ menuitem.title }}
          </span>
        </a>
        <a
          *ngIf="menuitem.subPages !== null && this.sidebar === true"
          style="margin: 15px 10px"
          (click)="menuitem.showSubMenu = !menuitem.showSubMenu"
        >
          <img
            src="../assets/sidebar-icons/right-arrow.svg"
            [hidden]="menuitem.showSubMenu === true"
          />
          <img
            src="../assets/sidebar-icons/down-arrow.svg"
            [hidden]="menuitem.showSubMenu === false"
          />
        </a>
      </li>

      <div
        *ngIf="menuitem.showSubMenu && menuitem.subPages !== null"
        class="m-l-70"
      >
        <ng-container *ngIf="permissions$ | async as permissions">
          <ng-container
            *ngIf="
              checkUserHasSubMenusPermissions(
                permissions,
                menuitem.subPages,
                menuitem.permission
              )
            "
          >
            <ul
              lines="none"
              class="p-0 m-0"
              [hidden]="this.sidebar === false"
              *ngFor="let submenuitem of menuitem.subPages"
            >
              <a
                class="submenu m-0"
                mat-list-item
                [routerLink]="submenuitem.url"
                routerLinkActive="subSelected"
                *appCheckUserHasPermission="[submenuitem.permission]"
                (click)="sidenav.close()"
              >
                <span>{{ submenuitem.title }}</span>
              </a>
            </ul>
          </ng-container>
        </ng-container>
      </div>
    </mat-nav-list>
    <img
      src="../assets/sidebar-icons/innova-big.svg"
      [hidden]="this.sidebar === false"
      style="position: absolute; bottom: 15px; left: 20px"
    />
    <img
      src="../assets/sidebar-icons/innova-small.svg"
      [hidden]="this.sidebar === true"
      style="position: absolute; bottom: 15px; left: 20px"
    />
  </mat-sidenav>

  <mat-sidenav-content>
    <app-header
      (SideNavToggle)="sidenav.toggle()"
      [selectedMenu]="this.selectedMenu"
      [ngClass]="{
        'hide-content': isUserAuthenticated === false
      }"
    ></app-header>

    <main
      style="margin: 14px 0 0 70px; height: 100%"
      [ngClass]="{
        'hide-sidebar': isUserAuthenticated === false
      }"
    >
      <router-outlet></router-outlet>
    </main>
  </mat-sidenav-content>
</mat-sidenav-container>
