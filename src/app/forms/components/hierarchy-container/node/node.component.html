<div
  class="parentNode node"
  [ngClass]="{ active: selectedNode.id === node.id }"
>
  <div class="left">
    <div class="nodeContent" (click)="setSelectedNode(node)">
      <img src="assets/rdf-forms-icons/form-image-upload.svg" />
      <div class="description">
        <span class="title">{{ node.name }}</span>
        <span class="subTitle"> {{ node.type }} Id: {{ node.id }} </span>
      </div>
    </div>
    <div
      *ngIf="node.hasChildren && node.children"
      class="childrenHead"
      [ngClass]="{ inactive: selectedNode.id !== node.id }"
    >
      <span
        class="expandCollapseBtn"
        (click)="node.isExpanded = !node.isExpanded"
        ><mat-icon [ngClass]="{ 'rotate-270': !node.isExpanded }"
          >expand_circle_down</mat-icon
        ></span
      >
      <span>{{ assetHierarchyUtil.getAssetCountByNode(node) }} Assets</span>
    </div>
  </div>
  <div class="right">
    <span> {{ getTasksCountByNodeId(node.id) }} </span>
    <span
      [matMenuTriggerFor]="hierarchyMenu"
      class="more-icon"
      aria-label="More Options"
    >
      <mat-icon>more_horiz</mat-icon>
    </span>
    <mat-menu #hierarchyMenu="matMenu" xPosition="before">
      <button mat-menu-item>
        <span (click)="openShowHierarchyPopup()">Show Hierarchy</span>
      </button>
      <button
        mat-menu-item
        class="text-red"
        (click)="onRemoveNode($event, node)"
      >
        <span>Delete</span>
      </button>
    </mat-menu>
  </div>
</div>
<div *ngIf="node.hasChildren" class="children">
  <div
    *ngIf="node.isExpanded"
    [ngClass]="{ displayInlineBlock: !node.isExpanded }"
  >
    <app-node
      [node]="node"
      [hierarchyMode]="hierarchyMode"
      *ngFor="let node of node.children"
      (nodeRemoved)="removeNodeHandler($event)"
    ></app-node>
  </div>
</div>
