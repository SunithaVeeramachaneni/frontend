<div *ngIf="formMetadata$ | async as formMetadata">
  <div class="header">
    <div>
      <span>Assets ({{ totalAssetsCount }})</span>
      <button
        mat-icon-button
        class="addBtn"
        *ngIf="hierarchy.length"
        (click)="openHierarchyModal()"
      >
        <mat-icon>add</mat-icon>
      </button>
    </div>
    <span *ngIf="hierarchy.length">Tasks ({{ getTotalTasksCount() }})</span>
  </div>
  <span class="custom-form-field-gray-color search" *ngIf="hierarchy.length">
    <mat-form-field appearance="outline" class="searchField">
      <mat-icon matPrefix class="searchIcon">search</mat-icon>
      <input
        [disabled]="hierarchyMode !== 'asset_hierarchy'"
        matInput
        type="text"
        [placeholder]="'Search...'"
        autocomplete="off"
        [formControl]="searchHierarchyKey"
      />
      <img [src]="filterIcon" matSuffix alt="Open Filter" />
    </mat-form-field>
  </span>
  <div
    class="hierarchy"
    *ngIf="hierarchy.length"
    [ngClass]="{ displayGrid: hierarchyMode !== 'asset_hierarchy' }"
  >
    <div *ngIf="!filteredHierarchyList.length" class="emptySearchResult">
      <span
        >No Assets/Locations found for:
        <strong>{{ searchHierarchyKey.value }} </strong></span
      >
    </div>
    <div *ngIf="hierarchyMode === 'asset_hierarchy'">
      <app-node
        [node]="node"
        [hierarchyMode]="hierarchyMode"
        (nodeRemoved)="removeNodeHandler($event)"
        *ngFor="let node of filteredHierarchyList"
      ></app-node>
    </div>
  </div>
  <div *ngIf="!hierarchy.length" class="emptyHierarchy">
    <span>You have not added any assets yet</span>
    <button mat-raised-button color="primary">Add Assets</button>
  </div>
</div>
