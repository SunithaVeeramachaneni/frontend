<div
  class="bg-iphone"
  *ngIf="{
    formMetadata: formMetadata$ | async,
    pagesCount: pagesCount$ | async,
    moduleName: moduleName$ | async
  } as props"
>
  <span id="iphoneTime" class="current-time">
    {{ currentTime }}
  </span>
  <div class="iphone-header">
    <svg-icon
      icon="icon-Back_Page"
      id="iphoneBackArrow"
      class="previous-arrow"
    ></svg-icon>
    <p
      id="iphoneName"
      class="form-heading"
      matTooltip="{{ props.formMetadata.name }}"
    >
      {{ props.formMetadata.name }}
    </p>
    <svg-icon
      id="iphoneScanAssetIcon"
      *ngIf="moduleType === 'operator-rounds'"
      icon="icon-Scan_Asset"
      class="scan-asset"
    ></svg-icon>
    <svg-icon
      id="iphoneMoreIcon"
      *ngIf="moduleType === 'forms'"
      class="iphone-more"
      icon="icon-More"
    ></svg-icon>
  </div>
  <div
    *ngIf="moduleType === 'operator-rounds'"
    class="asset-navigation-container"
  >
    <div class="asset-navigation">
      <svg-icon icon="icon-Arrow_Backward" class="backward-arrow"></svg-icon>
      <div id="iphoneAssetLocationName" class="asset-name">
        {{ assetLocationName }}
      </div>

      <svg-icon
        id="iphoneForwardArrow"
        icon="icon-Arrow_Forward"
        class="backward-arrow"
      ></svg-icon>
    </div>

    <svg-icon id="iphoneMore" class="more" icon="icon-More"></svg-icon>
  </div>
  <div
    class="iphone-preview"
    [ngClass]="
      moduleType === 'operator-rounds' ? 'iphone-preview-operator-rounds' : ''
    "
  >
    <app-preview
      (totalPageCount)="changePageCount($event)"
      (isOpenBottomSheet)="openBottomSheet($event)"
      [pageIndex]="currentPage"
      [subFormId]="subFormId"
      [moduleType]="moduleType"
    ></app-preview>
  </div>
  <div
    class="iphone-footer"
    [ngClass]="
      moduleType === 'operator-rounds' ? 'iphone-footer-operator-rounds' : ''
    "
    *ngIf="totalPages"
  >
    <button
      id="iphonePreviousPageBtn"
      class="previous-page"
      (click)="prevPage()"
      [style.visibility]="currentPage !== 1 ? 'visible' : 'hidden'"
    >
      <svg-icon
        id="iphonePreviousPageIcon"
        class="back-page-svg"
        icon="icon-Back_Page"
        class="back-page-svg"
      ></svg-icon>
      <div class="text-previous">
        <span id="iphonePageNum" translate="page"></span> {{ currentPage - 1 }}
      </div>
    </button>
    <button id="iphoneSaveBtn" class="btn-save" translate="save"></button>
    <span id="iphoneCurrentPage" class="page-count" *ngIf="totalPages > 1"
      >{{ currentPage }}/{{ totalPages }}</span
    >
    <button
      id="iphoneNextPageBtn"
      class="next-page"
      (click)="nextPage()"
      [style.visibility]="
        currentPage === totalPages || totalPages <= 1 ? 'hidden' : 'visible'
      "
    >
      <div class="text-next">
        <span id="iphoneCurrentPageCount" translate="page"></span>
        {{ currentPage + 1 }}
      </div>
      <svg-icon
        id="iphonePreviousPage"
        class="front-page-svg"
        icon="icon-Back_Page"
        class="front-page-svg"
      ></svg-icon>
    </button>
  </div>

  <div
    class="bottom-sheet"
    [ngClass]="isOpenBottomSheet ? '' : 'hide-bottom-sheet'"
  >
    <div
      id="iphoneChooseOption"
      class="bottom-list-item choose-option"
      matLine
      translate="chooseOption"
    ></div>
    <hr />
    <div
      id="iphoneCreateIssue"
      class="bottom-list-item"
      matListItemTitle
      translate="createIssue"
    ></div>
    <hr />
    <button
      id="iphoneHistoryText"
      class="bottom-list-item bottom-btn"
      matListItemTitle
      (click)="openHistoryBottomSheet()"
      [disabled]="!isHistoryVisible"
      translate="historyTxt"
      *ngIf="props.moduleName === 'OPERATOR_ROUNDS'"
    ></button>
    <hr *ngIf="props.moduleName === 'OPERATOR_ROUNDS'" />
    <div
      id="iphoneSkipTask"
      class="bottom-list-item skip-task"
      matListItemTitle
      translate="skipTask"
    ></div>
    <hr />
    <button
      id="iphoneCloseBtn"
      matListItemTitle
      class="bottom-list-item bottom-btn"
      (click)="closeBottomSheet()"
      translate="cancel"
    ></button>
  </div>

  <div
    class="history-bottom-container"
    [ngClass]="isOpenHistoryBottomSheet ? '' : 'hide-history-bottom-sheet'"
  >
    <div class="history-bottom-sheet">
      <div class="header">
        <div></div>
        <div
          id="iphoneHistoryText"
          class="title"
          matLine
          translate="historyTxt"
        ></div>
        <button
          id="iphoneDoneBtn"
          (click)="closeHistoryBottomSheet()"
          class="done-btn"
          translate="done"
        ></button>
      </div>
      <hr />
      <div class="main">
        <div id="iphoneLastFiveReading" class="main-heading" matLine>
          {{
            'lastFiveReadingsHeader'
              | translate
                : {
                    count: historyCount | translate
                  }
          }}
        </div>
        <div
          class="main-question"
          matLine
          translate="whatIsPressureReadingHeader"
        ></div>
        <div class="history-chart-container">
          <img
            id="iphoneHistoryChart"
            class="history-chart"
            src="assets/Images/History_Preview_Graph.png"
            alt="preview-history-graph"
          />
        </div>
        <table class="history-table">
          <tr>
            <th
              *ngFor="let header of historyTableHeaders"
              [id]="header.id"
              class="table-heading"
            >
              {{ header.translate | translate }}
            </th>
          </tr>
          <tr *ngFor="let x of historyRecords; let i = index">
            <td>Date {{ i + 1 }}</td>
            <td>Reading {{ i + 1 }}</td>
            <td>Operator {{ i + 1 }}</td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>
