<div *ngIf="userInfo$ | async" class="issues-list">
  <span
    [ngClass]="{
      'no-of-issues': !isNotificationAlert,
      'no-of-issues-notification': isNotificationAlert
    }"
    *ngIf="issuesCount$ | async as totalCount"
  >
    <span id="issuesListCount" class="issues-count">
      {{ totalCount | count }}
    </span>
    <span id="issuesListCountText" class="issues-text">
      {{
        'issues'
          | translate
            : {
                count: totalCount || 0
              }
      }}
    </span>
  </span>
  <span class="custom-form-field-gray-color">
    <mat-form-field
      appearance="outline"
      [ngClass]="{
        'issues-search': !isNotificationAlert,
        'issues-search-notification': isNotificationAlert
      }"
    >
      <mat-icon id="issuesListSearchIcon" matPrefix class="searchIcon"
        >search</mat-icon
      >
      <input
        id="issuesListSearchText"
        matInput
        type="text"
        [placeholder]="'search' | translate"
        autocomplete="off"
        [formControl]="searchIssue"
      />
      <svg-icon
        id="issuesListFilterIcon"
        icon="icon-filterIcon"
        matSuffix
        cdkOverlayOrigin
        #trigger="cdkOverlayOrigin"
        (click)="isPopoverOpen = !isPopoverOpen"
        class="common-filter-icon"
      ></svg-icon>
    </mat-form-field>
    <ng-template
      cdkConnectedOverlay
      cdkConnectedOverlayPanelClass="custom-popover"
      cdkConnectedOverlayBackdropClass="cdk-overlay-transparent-backdrop"
      [cdkConnectedOverlayHasBackdrop]="true"
      [cdkConnectedOverlayOpen]="isPopoverOpen"
      [cdkConnectedOverlayOrigin]="trigger"
      cdkConnectedOverlayWidth="400px"
      (backdropClick)="isPopoverOpen = false"
    >
      <app-filter
        [json]="filterJson"
        (close)="isPopoverOpen = false"
        (apply)="applyFilters($event)"
        (reset)="clearFilters()"
        class="set-filter"
      ></app-filter>
    </ng-template>
  </span>

  <div
    *ngIf="(issues$ | async) && (isLoading$ | async) === false"
    [ngClass]="{ 'dynamic-table-height': isNotificationAlert }"
  >
    <cwp-dynamictable
      [dataSource]="dataSource"
      [configOptions]="configOptions"
      (fetchDataCallback)="handleTableEvent($event)"
      (cellClickActionHandler)="cellClickActionHandler($event)"
      (rowLevelActionHandler)="rowLevelActionHandler($event)"
      class="width-100"
    ></cwp-dynamictable>
  </div>

  <div *ngIf="isLoading$ | async">
    <div
      [ngClass]="{
        'padding-lr-20': !isNotificationAlert,
        'padding-lr-20-notification': isNotificationAlert
      }"
    >
      <div *ngFor="let number of ghostLoading">
        <ngx-shimmer-loading [width]="'100%'" [height]="'40px'">
        </ngx-shimmer-loading>
      </div>
    </div>
  </div>
</div>
