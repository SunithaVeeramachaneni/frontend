<div [formGroup]="logicsForm">
  <mat-tab-group formArrayName="logics">
    <mat-tab
      *ngFor="let logic of getLogicsList(); let i = index"
      label="{{ logic.value.logicTitle ? logic.value.logicTitle : 'Untitled' }}"
    >
      <div class="tabContent" [formGroupName]="i">
        <div class="logicRow">
          <input type="hidden" formControlName="logicTitle" />
          <input type="hidden" formControlName="expression" />
          If answer
          <select
            class="logicCondition"
            formControlName="operator"
            (ngModelChange)="operatorChanged(logic, $event)"
          >
            <option
              value="{{ operator.code }}"
              *ngFor="let operator of fieldOperators"
            >
              {{ operator.displayName }}
            </option>
          </select>
          <input
            type="text"
            class="logicValue"
            formControlName="operand2"
            (ngModelChange)="operand2Changed(logic, $event)"
          />
          then
          <input
            *ngIf="logic.value.action"
            formControlName="action"
            class="action"
            readonly
          />
          <button mat-button [matMenuTriggerFor]="menu" color="primary">
            +trigger
          </button>
          <mat-menu #menu="matMenu">
            <button
              mat-menu-item
              (click)="triggerMenuAction('ask_questions', logic)"
            >
              Ask Questions
            </button>
            <button mat-menu-item (click)="triggerMenuAction('hide', logic)">
              Hide Questions
            </button>
            <button
              mat-menu-item
              (click)="triggerMenuAction('ask_evidence', logic)"
            >
              Ask Evidence
            </button>
          </mat-menu>
          <!-- <input
            readonly
            formControlName="expression"
            class="action"
            *ngIf="logic.value.action"
          /> -->
        </div>

        <div
          *ngIf="logic.value.action === 'Ask Questions'"
          class="logicAskQuestions"
        >
          <!-- <h4>Asking Questions</h4> -->
          <div
            *ngFor="let question of getQuestionsOfLogic(logic); let i = index"
          >
            <div class="dis-flex">
              <input
                type="hidden"
                formControlName="position"
                [ngModel]="i + 1"
              />
              <div class="width-70">
                <img
                  src="assets/rdf-forms-icons/six-dots.svg"
                  alt="six-dots"
                  class="m-l-10 six-dots"
                />
                <mat-form-field
                  appearance="outline"
                  class="width-90"
                  style="margin-left: 10px"
                >
                  <input
                    autocomplete="off"
                    type="text"
                    matInput
                    formControlName="name"
                    placeholder="Type Question"
                  />
                </mat-form-field>
              </div>

              <div class="width-30">
                <button class="response-type-btn">
                  <img
                    [src]="getFieldTypeImage(question.controls.fieldType.value)"
                    class="response-type-icons"
                    style="position: relative; top: -2px"
                  />&nbsp;
                  <span
                    style="
                      white-space: nowrap;
                      display: inline-block;
                      text-overflow: ellipsis;
                      width: 60%;
                      overflow: hidden;
                    "
                  >
                    {{
                      getFieldTypeDescription(question.controls.fieldType.value)
                    }}
                  </span>
                  <mat-icon style="float: right; position: relative; top: -4px">
                    keyboard_arrow_down
                  </mat-icon>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
