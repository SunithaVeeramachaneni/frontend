<div class="create-form-main" [formGroup]="createForm">
  <div
    class="dis-flex"
    style="
      justify-content: space-between;
      background-color: #ffffff;
      border-bottom: 1px solid #e5e5e5;
    "
  >
    <div>
      <a class="form-title">
        <input
          type="text"
          formControlName="name"
          class="form_title_input"
          placeholder="Untitled Form"
          autofocus="true"
          autocomplete="off"
        />
      </a>
      <a class="form-description">
        <input
          type="text"
          formControlName="description"
          class="form_description_input"
          placeholder="Add Form description"
          autofocus="true"
          autocomplete="off"
        />
      </a>
    </div>
    <div class="dis-flex">
      <p *ngIf="status$ | async as status">{{ status }}</p>
      <button
        (click)="publishInstruction()"
        mat-raised-button
        class="b-r-8 publish-btn"
      >
        <span>
          <img
            alt="upload"
            src="assets/work-instructions-icons/svg/upload-white.png"
            class="publish-btn-icon"
          />
          <span class="publish">Publish</span>
        </span>
      </button>
    </div>
  </div>
  <div class="dis-flex">
    <div formArrayName="sections" class="width-70">
      <div *ngFor="let section of getSections(createForm); let i = index">
        <div style="padding: 10px" [formGroupName]="i">
          <input type="hidden" formControlName="position" [ngModel]="i + 1" />
          <div
            style="
              background: rgba(61, 90, 254, 0.15);
              border-radius: 8px 8px 0px 0px;
              height: 35px;
              padding: 7px;
            "
          >
            <mat-icon
              (click)="isOpenState = false"
              *ngIf="isOpenState === true"
              class="section-arrow"
            >
              keyboard_arrow_down
            </mat-icon>
            <mat-icon
              (click)="isOpenState = true"
              *ngIf="isOpenState === false"
              class="section-arrow"
            >
              keyboard_arrow_right
            </mat-icon>

            <span>
              <input
                type="text"
                formControlName="name"
                class="form_section_name_input"
                placeholder="Untitled Section"
                autofocus="true"
                autocomplete="off"
                (keyup.enter)="section.get('name').disable()"
              />
              <img
                src="../../../../assets/rdf-forms-icons/edit-icon.svg"
                alt="edit-icon"
                (click)="editSection(section)"
                *ngIf="section.get('name').disabled === true"
                style="cursor: pointer; width: 13px; margin-left: 5px"
              />
            </span>

            <img
              src="../../../../assets/rdf-forms-icons/more.svg"
              alt="more-icon"
              style="float: right; margin-top: 17px; margin-right: 12px"
            />

            <img
              src="assets/rdf-forms-icons/add-questions.svg"
              alt="add-questions"
              style="
                position: relative;
                left: 80px;
                float: right;
                cursor: pointer;
              "
              (click)="addQuestion(i)"
            />

            <img
              src="assets/rdf-forms-icons/add-sections.svg"
              alt="add-sections"
              (click)="addSection()"
              style="
                position: relative;
                left: 118px;
                top: 45px;
                float: right;
                cursor: pointer;
              "
            />
          </div>
          <div
            *ngIf="isOpenState === true"
            style="background-color: #ffffff"
            formArrayName="questions"
          >
            <div class="dis-flex">
              <div class="width-70">
                <p class="sub-headings m-l-30">Questions</p>
              </div>
              <div class="width-30">
                <p class="sub-headings">Response Type</p>
              </div>
            </div>
            <div *ngFor="let question of getQuestions(section); let j = index">
              <div [formGroupName]="j" class="dis-flex">
                <input
                  type="hidden"
                  formControlName="position"
                  [ngModel]="j + 1"
                />
                <div class="width-70">
                  <img
                    src="../../../../assets/rdf-forms-icons/six-dots.svg"
                    alt="six-dots"
                    class="m-l-10 six-dots"
                  />
                  <mat-form-field
                    appearance="outline"
                    class="width-90"
                    style="margin-left: 10px"
                  >
                    <input type="text" matInput formControlName="name" />
                    <!-- <quill-material formControlName="name" placeholder="">
                    </quill-material> -->
                  </mat-form-field>
                </div>

                <div class="width-30">
                  <mat-form-field appearance="outline">
                    <mat-select
                      placeholder="Select Response"
                      formControlName="fieldType"
                    >
                      <mat-select-trigger>
                        <img
                          [src]="
                            getFieldTypeImage(question.controls.fieldType.value)
                          "
                        />&nbsp;
                        <span style="position: relative; top: -2px">{{
                          getFieldTypeDescription(
                            question.controls.fieldType.value
                          )
                        }}</span>
                      </mat-select-trigger>
                      <mat-option
                        *ngFor="let fieldType of fieldTypes"
                        [value]="fieldType.type"
                      >
                        <img [src]="getFieldTypeImage(fieldType.type)" />&nbsp;
                        <span style="position: relative; top: -2px">
                          {{ fieldType.description }}
                        </span>
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="width-30" style="padding: 10px 20px">
      <app-rdf-forms-iphone-preview></app-rdf-forms-iphone-preview>
    </div>
  </div>
</div>
