<ng-container>
  <div>
    <div class="main-container">
      <ngx-spinner
        size="medium"
        bdColor="rgba(0, 0, 0, 0.6)"
        type="ball-clip-rotate-pulse"
        [fullScreen]="false"
      >
      </ngx-spinner>
      <div class="usergroup-header">
        <div class="width-30 left-pannel-header">
          <h2 class="heading" translate="userGroups"></h2>
          <button mat-icon-button (click)="openAddEditUserGroupModal()">
            <svg-icon icon="icon-add-user" class="add-btn"></svg-icon>
          </button>
        </div>

        <div class="right-pannel-header">
          <button
            mat-icon-button
            [matMenuTriggerFor]="menu"
            class="more-usergroup"
            aria-label="More Options"
          >
            <mat-icon>more_horiz</mat-icon>
          </button>
          <mat-menu #menu="matMenu">
            <button
              mat-menu-item
              class="text-red"
              translate="deleteBtn"
            ></button>
          </mat-menu>
          <span class="count-of-usergroup">
            <span class="usergroup-count">{{ usergrp }}</span>
            <span class="usergroup-text">{{
              'userGroupCount' | translate
            }}</span>
          </span>
        </div>
      </div>
      <div class="dis-flex usergroup-content">
        <div class="width-25 custom-form-field-gray-color usergroup-left-panel">
          <mat-form-field appearance="outline" class="search-form-field">
            <mat-icon matPrefix class="searchIcon">search</mat-icon>
            <input
              matInput
              type="text"
              [placeholder]="'searchUserGroup' | translate"
              [formControl]="searchUserGroup"
              autocomplete="off"
            />
          </mat-form-field>

          <mat-list
            class="roles"
            *ngIf="userGroupList$ | async as userGroups"
            #listContainer
          >
            <div *ngIf="userGroups.length === 0" class="unselected-role-text">
              <span translate="noResultsFound"></span>
            </div>
            <ng-container
              *ngIf="(isLoading$ | async) === false; else loadingUserGroupsList"
            >
              <mat-list-item
                #userGroupList
                *ngFor="let userGroup of userGroups"
                class="roles-list"
                (click)="showSelectedUserGroup(userGroup)"
                [ngClass]="{
                  'selected-roles-list': this.selectedUserGroup
                    ? userGroup.id === this.selectedUserGroup.id
                    : ''
                }"
              >
                <mat-checkbox> </mat-checkbox>
                <span
                  class="role-name"
                  matTooltip="{{ userGroup.name }}"
                  [ngClass]="{ 'text-red': userGroup.name?.length > 100 }"
                >
                  {{ userGroup.name }}
                </span>
              </mat-list-item>
            </ng-container>
          </mat-list>
        </div>
        <div class="width-100">
          <app-user-group-users-list
            [userGroupId]="selectedUserGroup?.id"
            [userGroupPlantId]="selectedUserGroup?.plantId"
            style="height: 80vh"
          >
          </app-user-group-users-list>
        </div>
      </div>
    </div>
  </div>
  <router-outlet></router-outlet>
</ng-container>

<ng-template #loadingUserGroupsList>
  <div class="p-10">
    <ngx-shimmer-loading [width]="'100%'" [height]="'30px'">
    </ngx-shimmer-loading>
    <ngx-shimmer-loading [width]="'100%'" [height]="'30px'">
    </ngx-shimmer-loading>
    <ngx-shimmer-loading [width]="'100%'" [height]="'30px'">
    </ngx-shimmer-loading>
  </div>
</ng-template>
