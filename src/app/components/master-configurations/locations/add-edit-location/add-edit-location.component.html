<div id="add-edit-slider">
  <mat-card [formGroup]="locationForm">
    <div class="top-bar">
      <svg-icon
        id="addEditLocCancelIcon"
        (click)="cancel()"
        icon="icon-close"
        class="cancel"
      ></svg-icon>
      <h1 id="addEditLocTitle" class="heading">{{ locationTitle }}</h1>
    </div>
    <div class="container-div">
      <p class="image-container">
        <span *ngIf="!locationImage?.length">
          <svg-icon
            id="addEditLocIcon"
            icon="icon-locationIcon"
            class="image-contain"
          ></svg-icon>
        </span>

        <img
          id="addEditLocImg"
          [src]="locationImage"
          alt="Image"
          class="image-contain"
          *ngIf="locationImage !== ''"
        />
      </p>
      <p class="m-0">
        <mat-form-field appearance="outline" class="width-100 m-b-10">
          <mat-label id="addEditLocName" translate="nameMandatory"></mat-label>
          <input
            matInput
            [placeholder]="'nameMandatory' | translate"
            formControlName="name"
          />

          <mat-error
            id="addEditLocNameError"
            *ngIf="processValidationErrors('name')"
            class="m-t-5 error-fields"
          >
            {{
              errors.name.name
                | translate
                  : {
                      name: 'name' | translate
                    }
            }}
          </mat-error>
        </mat-form-field>
      </p>
      <p class="m-0">
        <mat-form-field appearance="outline" class="width-100 m-b-10">
          <mat-label
            id="addEditLocId"
            translate="locationIdMandatory"
          ></mat-label>
          <input
            matInput
            [placeholder]="'locationIdMandatory' | translate"
            formControlName="locationId"
          />
          <mat-error
            id="addEditLocIdError"
            *ngIf="
              locationStatus !== 'edit' && processValidationErrors('locationId')
            "
            class="m-t-5 error-fields"
          >
            {{
              errors.locationId.name
                | translate
                  : {
                      name: 'locationId' | translate
                    }
            }}
          </mat-error>
        </mat-form-field>
      </p>
      <p class="m-0">
        <mat-form-field appearance="outline" class="width-100 m-b-10">
          <mat-label id="addEditLocModel" translate="model"></mat-label>
          <input
            matInput
            [placeholder]="'model' | translate"
            formControlName="model"
          />
        </mat-form-field>
      </p>
      <p class="m-0">
        <mat-form-field appearance="outline" class="width-100 m-b-10">
          <mat-label
            id="addEditLocDescription"
            translate="description"
          ></mat-label>
          <textarea
            id="addEditLocPlaceHolder"
            matInput
            [placeholder]="'description' | translate"
            formControlName="description"
          >
          </textarea>
          <mat-error
            id="addEditDescriptionError"
            *ngIf="processValidationErrors('description')"
            class="m-t-5 error-fields"
          >
            {{
              errors.description.name
                | translate
                  : {
                      name: 'description' | translate
                    }
            }}
          </mat-error>
        </mat-form-field>
      </p>
      <p class="m-0">
        <mat-form-field appearance="outline" class="width-100">
          <mat-label
            id="addEditLocPlant"
            translate="plantMandatory"
          ></mat-label>
          <mat-select
            formControlName="plantsID"
            (valueChange)="onSelectPlant($event)"
          >
            <input
              class="searchable-input"
              [placeholder]="'searchId' | translate"
              (keyup)="onKeyPlant($event)"
              #searchInput
            />
            <div class="scrollable-area">
              <mat-option
                id="addEditLocPlantOptions"
                [value]="plant.id"
                *ngFor="let plant of allPlantsData"
                >{{ plant.plantId }} - {{ plant.name }}</mat-option
              >
            </div>
          </mat-select>
          <mat-error
            id="addEditLocPlantError"
            *ngIf="processValidationErrors('plantsID')"
            class="m-t-5 error-fields"
          >
            {{
              errors.plantsID.name
                | translate
                  : {
                      name: 'Plant' | translate
                    }
            }}
          </mat-error>
        </mat-form-field>
      </p>
      <p class="m-0 select-field">
        <mat-form-field appearance="outline" class="width-100">
          <mat-label id="addEditLocParent" translate="parent"></mat-label>
          <mat-select
            formControlName="parentId"
            (valueChange)="onSelectLocation($event)"
          >
            <input
              id="addEditLocSearchId"
              class="searchable-input"
              [placeholder]="'searchId' | translate"
              (keyup)="onKey($event)"
              (keydown)="$event.stopPropagation()"
            />
            <div class="scrollable-area">
              <ng-container *ngFor="let parent of allParentsData">
                <mat-option id="addEditLocParentName" [value]="parent.id"
                  >{{ parent.locationId }} - {{ parent.name }}</mat-option
                >
              </ng-container>
            </div>
          </mat-select>
        </mat-form-field>
      </p>

      <p class="m-0">
        <mat-checkbox id="checkBoxLoc" formControlName="isUnit"></mat-checkbox>
        <span
          id="checkBoxLocLabel"
          class="checkbox-label-bold"
          translate="markLocation"
        ></span>
      </p>
      <p class="m-0">
        <span
          id="checkBoxLocDesc"
          class="checkbox-label"
          translate="markLocationDesc"
        ></span>
      </p>
    </div>
  </mat-card>
  <div class="actions-footer">
    <button
      id="addEditLocCancelBtn"
      mat-stroked-button
      class="cancel-btn"
      type="button"
      (click)="cancel()"
      translate="cancelBtn"
    ></button>
    <button
      id="addEditLocCreateBtn"
      mat-raised-button
      class="create-btn"
      type="submit"
      [disabled]="
        locationForm.invalid || (!locationForm.pristine && locationForm.pending)
      "
      (click)="create()"
    >
      {{ locationButton }}
    </button>
  </div>
</div>
